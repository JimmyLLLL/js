OSI七层协议
物理层 数据链路层 网络层 传输层 会话层 表示层 应用层
五层模型
物理层 数据链路层 网络层 传输层 应用层

TCP属于传输层的，全双工
面向连接（类似拿起电话挂掉电话）、可靠（无差错、不丢失，按序到达）



传输层：负责向两台主机进程之间的通信提供“通用的”数据传输服务，应用进程利用该服务传送应用层报文
“通用的”是指不针对某一个特定的网络应用，而是多种应用可以使用同一个运输层服务


TCP全双工通信：建立连接后，任何时候数据发送
TCP面向连接、可靠的数据传输服务
TCP两端设有缓存
TCP面向字节流


TCP为了保证可靠：
数据包校验：若接收端检测出包有错，则丢弃
失序数据重排：TCP协议对失序数据重排，再交给应用层
丢掉重复数据
应答机制：接收端接收到数据后，发送确认信息
超时重发：发送端发出数据后，启动定时器，超时则重发报文段
流量控制：TCP两边拥有缓冲空间，防止接收端缓冲区溢出，使用可变大小的滑动窗口协议来进行流量控制。




UDP无连接，不保证可靠性，面向报文，没有拥塞控制，支持一对一，一对多，多对一

单工：数据只能在一个方向传输
半双工：允许数据两个方向，但同一时刻，只能在一个方向
全双工：允许数据在两个方向传输



TCP三次握手，四次挥手

三次握手，建立一个TCP连接时，整个建立过程客户端和服务端一共交互三个包

客户端发出连接请求报文，报文首部中同步位SYN=1，选择一个初始化序列号seq=x，此时进入SYN-SENT状态，等待
收到SYN包，确认报文（ACK=1，SYN=1），确认号是ack=x+1，同时为自己初始化序列号seq=y，服务器进入SYN-RCVD状态
收到SYN+ACK报文，发送确认报文，确认报文的ACK=1，报文号为ack=y+1，自己序列号seq=x+1，建立连接，进入ESTABLISHED状态



四次挥手

发送链接释放报文，停止发送数据。报文首部FIN=1，seq=u（传送回来最后一个字节的序号+1），进入FIN-WAIT-1状态

收到并发送确认报文，ACK=1，ack=u+1，带上自己序列号seq=v，服务器如有数据发送，客户端要继续接受，此时进入CLOSE-WAIT状态

服务器发完最后的数据后，发送连接中断报文，FIN=1，ack=u+1，服务器此时可能又发送了数据，seq=w，进入LAST-ACK状态

发出ACK=1，ack=w+1，自己序列号u+1，进入TIME-WAIT状态





HTTP方法
安全性：多次调用不产生副作用，安全的方法不修改资源状态
幂等性：多次调用返回的效果一致，客户端多次调用期望一样的结果

get只用于数据读取，不会导致非幂等性
post将指定资源的最新数据传送给服务器取代指定的资源内容，非幂等方法
put类似于post，指定资源在服务器的位置，进行数据的提交或更新
patch用于资源的部分更新，put用于资源整体更新
head请求页面的首部，常用于查看服务器性能
delete删除某些资源
options获取是否支持get、post、put等方法，跨域嗅探请求，判断是否将有权利访问指定资源
trace激发一个远程的、应用层的请求消息回路，用于HTTP请求的测试或诊断
connect将连接改为管道方式的代理服务器，通常用于ssl加密服务器的链接与非加密的http代理服务器的通信


HTTP无状态：客户端与服务器的通信，每个请求独立，HTTP协议对于独立的请求没有记忆能力
HTTP：无状态的面向连接协议


浏览器自己缓存 --> 操作系统DNS缓存 --> LDNS（本地区域名服务器）
--> 迭代解析 --> LDNS向根域名服务器（如com，org等解析顶级域名服务器的地址）发请求
--> （假如com）得到com域 --> LDNS向顶级域名服务器发请求 --> 返回目标域名服务器地址
--> 操作系统把IP给浏览器，自己存一份IP

DNS用无连接UDP传输，53端口明文传输带来DNS欺骗、DNS cache污染、DNS放大攻击等问题
DNSSec诞生：客户端对域名来源进行身份验证，检查DNS域名服务器应答记录完整性

同源： 协议、域名、端口同

非同源限制
1.Cookie、LocalStorage、indexDB的读写
2.Dom、js对象读取
3.ajax


网关
转发其他服务器通信数据的服务器，当接收客户端请求时，就像自己拥有资源一样对请求处理
类似代理，但是能力更强，能给通信链路提供平台化服务，例如鉴权

URL与URI
https://www.taobao.com/ 这个域名就是 URL，而每个商品的地址就是一个 URI。

顶级域(一级域名)
.cn
子域名（二级域名）
.com.cn
子域名（三级域名）
sina.com.cn
子域名（四级域名）
www.sina.com.cn / news.sina.com.cn
